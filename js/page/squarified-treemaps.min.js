var Squarify={squarify:function(e,v,t,f){this.scaleWeights(e,v,t);e.sort(function(j,d){return d-j});e.push(0);var a=t<v;var n=a?t:v;var m=0,l=0;var h=v;var u=t;var i=[];while(e.length>0){var q=e[0];var p=this.sum(i);var A=this.min(i);var C=this.max(i);var b=this.worst(p+q,Math.min(A,q),Math.max(C,q),n);var o=this.worst(p,A,C,n);var E=Math.abs(1-b);var D=Math.abs(1-o);if(i.length==0||E<D){i.push(q);e.shift()}else{var g=m;var c=l;var k=p/n;var B;for(B=0;B<i.length;++B){var q=i[B];var F=q/k;if(a){f(g,c,k,F);c=c+F}else{f(g,c,F,k);g=g+F}}if(a){m=m+k;h=h-k}else{l=l+k;u=u-k}a=u<h;n=a?u:h;i=[]}}},worst:function(d,c,a,b){return Math.max(b*b*a/(d*d),d*d/(b*b*c))},scaleWeights:function(c,b,a){var d=b*a/this.sum(c);$.each(c,function(f,e){c[f]=d*e})},max:function(a){return Math.max.apply(Math,a)},min:function(a){return Math.min.apply(Math,a)},sum:function(b){var a=0;$.each(b,function(d,c){a=a+c});return a}};$(function(){var h=600;var e=400;var f=new Kinetic.Stage({container:"container",width:h,height:e});var c=new Kinetic.Layer();var a=new Kinetic.Layer();var b=[100,200,50,30,32,35,25,15,13,20,12,10,8,6,6,5,4,3,2,2,1];var i=function(j,k){return{start:{x:0,y:0},end:{x:j,y:k},colorStops:[0,"#9DC1FC",1,"#284675"]}};var d=function(j,k){return{start:{x:0,y:0},end:{x:j,y:k},colorStops:[0,"blue",1,"red"]}};var g=function(j,q,l,m){var p=new Kinetic.Shape({drawFunc:function(){var r=this.getContext();r.font="italic 12pt Calibri";r.fillStyle="black";r.fillText("Hello World!",j,q+40)}});a.add(p);var k=d(l,m);var o=i(l,m);var n=new Kinetic.Rect({x:j,y:q,width:l,height:m,stroke:"black",strokeWidht:1,fill:o});n.on("mouseover",function(r){n.setFill(k);c.draw()});n.on("mouseout",function(r){n.setFill(o);c.draw()});c.add(n)};Squarify.squarify(b,h,e,g);f.add(c)});